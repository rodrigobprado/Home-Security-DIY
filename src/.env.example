# =============================================================================
# Home Security DIY - Environment Variables
# =============================================================================
# Copy this file to .env and update the values before running docker compose up.
#
# cp .env.example .env
# nano .env
# =============================================================================

# --- General ---
TZ=America/Sao_Paulo
PUID=1000
PGID=1000

# --- MQTT (Mosquitto) ---
MQTT_USER=homeassistant
MQTT_PASSWORD=CHANGE_ME_mqtt_password_here

# --- Zigbee2MQTT ---
# Device path for the Zigbee coordinator (Sonoff ZBDongle-P, SLZB-06, etc.)
# Run `ls /dev/serial/by-id/` to find your device
ZIGBEE_DEVICE=/dev/ttyUSB0

# --- Frigate NVR ---
# Camera RTSP URLs (update with your camera IPs and credentials)
# Format: rtsp://user:password@ip:554/stream
FRIGATE_CAM_ENTRADA_URL=rtsp://CHANGE_ME_cam_user:CHANGE_ME_cam_password@CAMERA_ENTRADA_IP:554/h264Preview_01_main
FRIGATE_CAM_FUNDOS_URL=rtsp://CHANGE_ME_cam_user:CHANGE_ME_cam_password@CAMERA_FUNDOS_IP:554/h264Preview_01_main
FRIGATE_CAM_LATERAL_URL=rtsp://CHANGE_ME_cam_user:CHANGE_ME_cam_password@CAMERA_LATERAL_IP:554/h264Preview_01_main
FRIGATE_CAM_GARAGEM_URL=rtsp://CHANGE_ME_cam_user:CHANGE_ME_cam_password@CAMERA_GARAGEM_IP:554/h264Preview_01_main

# Substream URLs (lower resolution for detection - saves CPU)
FRIGATE_CAM_ENTRADA_SUB_URL=rtsp://CHANGE_ME_cam_user:CHANGE_ME_cam_password@CAMERA_ENTRADA_IP:554/h264Preview_01_sub
FRIGATE_CAM_FUNDOS_SUB_URL=rtsp://CHANGE_ME_cam_user:CHANGE_ME_cam_password@CAMERA_FUNDOS_IP:554/h264Preview_01_sub
FRIGATE_CAM_LATERAL_SUB_URL=rtsp://CHANGE_ME_cam_user:CHANGE_ME_cam_password@CAMERA_LATERAL_IP:554/h264Preview_01_sub
FRIGATE_CAM_GARAGEM_SUB_URL=rtsp://CHANGE_ME_cam_user:CHANGE_ME_cam_password@CAMERA_GARAGEM_IP:554/h264Preview_01_sub

# --- Storage ---
# Path for Frigate recordings (use a dedicated HDD/SSD mount)
FRIGATE_MEDIA_PATH=./frigate/media

# Path for Home Assistant data
HA_CONFIG_PATH=./homeassistant

# --- PostgreSQL ---
# Banco de dados central com schemas isolados por serviço.
# IMPORTANTE: Altere todas as senhas antes de usar em produção!
#
# Schemas disponíveis:
#   homeassistant → ha_user          (Home Assistant recorder)
#   dashboard     → dashboard_user   (Dashboard operacional, Issue #2)
#   metrics       → metrics_user     (Métricas de sensores/câmeras/drones)
POSTGRES_DB=homedb
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_postgres_admin_password

# Senhas dos usuários de serviço (permissões isoladas por schema)
POSTGRES_HA_PASSWORD=CHANGE_ME_ha_password
POSTGRES_DASHBOARD_PASSWORD=CHANGE_ME_dashboard_password
POSTGRES_METRICS_PASSWORD=CHANGE_ME_metrics_password

# --- Dashboard Operacional (Issue #2) ---
# IP do host onde o Home Assistant está rodando (network_mode: host)
HA_HOST=HOME_ASSISTANT_HOST_IP
# Long-lived access token gerado em HA: Perfil → Tokens de acesso longa duração
HA_TOKEN=CHANGE_ME_ha_long_lived_token
# API key obrigatória para autenticar chamadas HTTP e WebSocket na Dashboard API
DASHBOARD_API_KEY=CHANGE_ME_dashboard_api_key
# Origens permitidas no CORS (separadas por vírgula)
DASHBOARD_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# --- Drones: Defesa ativa ---
# Nunca versionar os PINs reais no repositório.
DEFENSE_PIN_UGV=CHANGE_ME_ugv_pin
DEFENSE_PIN_UAV=CHANGE_ME_uav_pin
DEFENSE_TOTP_SECRET_UGV=JBSWY3DPEHPK3PXP
DEFENSE_WARNING_SECONDS_UGV=5
DEFENSE_COOLDOWN_SECONDS_UGV=30
DEFENSE_MAX_TRIGGERS_PER_DAY_UGV=3
DEFENSE_EXCLUSION_ZONES_UGV=sidewalk,service_entry,neighbor_gate
DEFENSE_AUDIT_LOG_PATH_UGV=/tmp/ugv_defense_audit.log
DEFENSE_ACTUATOR_SPEC_UGV=solenoid_12v_nc+co2_valve

# --- Drones: Autorização de comando MQTT ---
# HMAC SHA-256 sobre o payload JSON (sem o campo `signature`).
COMMAND_HMAC_SECRET_UGV=CHANGE_ME_ugv_hmac_secret
COMMAND_HMAC_SECRET_UAV=CHANGE_ME_uav_hmac_secret
COMMAND_ALLOWED_SOURCES_UGV=dashboard,homeassistant
COMMAND_ALLOWED_SOURCES_UAV=dashboard,homeassistant
COMMAND_MAX_SKEW_SECONDS_UGV=30
COMMAND_MAX_SKEW_SECONDS_UAV=30
ALLOW_UNSIGNED_HOMEASSISTANT_COMMANDS_UGV=false
ALLOW_UNSIGNED_HOMEASSISTANT_COMMANDS_UAV=false
MAX_ALTITUDE_M_AGL_UAV=120
RTH_BATTERY_THRESHOLD_UAV=20
UAV_MIN_SAFE_DISTANCE_M=30
GEOFENCE_MIN_LAT_UAV=-23.5515
GEOFENCE_MAX_LAT_UAV=-23.5495
GEOFENCE_MIN_LON_UAV=-46.6345
GEOFENCE_MAX_LON_UAV=-46.6320

# --- Backup ---
# Se definido, scripts/backup.sh criptografa backups de configuração com AES-256.
BACKUP_ENCRYPTION_PASSPHRASE=CHANGE_ME_backup_encryption_passphrase
